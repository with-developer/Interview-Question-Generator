<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="{{ url_for('static', filename='logo/favicon.png') }}">

  <title>당면행</title>

  <!-- Bootstrap 5.0 CSS CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.0/css/bootstrap.min.css"
    integrity="sha512-NZ19NrT58XPK5sXqXnnvtf9T5kLXSzGQlVZL9taZWeTBtXoN3xIfTdxbkQh6QSoJfJgpojRqMfhyqBAAEeiXcA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.0/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Black Han Sans&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbit&display=swap">


  <!-- Custom styles for this template -->
  <link href="{{ url_for('static', filename='cover.css') }}" rel="stylesheet">
  <style>
    
footer{
  position: unset;
  bottom: 0;
  left: 0;
  right: 0;
  background: #1269D8;
  height: auto;
  width: 100vw;

  padding-top: 10px;
  color: #fff;
}
.footer-content{
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  text-align: center;
}
.footer-content h3{
  font-size: 0.7rem;
  font-weight: 500;
  margin-top:0.5rem;
  margin-bottom: 0;
  text-transform: capitalize;
}
.footer-content p{
  max-width: 500px;
  margin: 0 auto;
  line-height: 28px;
  font-size: 0.5rem;
  color: #cacdd2;
}
.socials{
  list-style: none;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 1rem 0 3rem 0;
}
.socials li{
  margin: 0 10px;
}
.socials a{
  text-decoration: none;
  color: #fff;
  border: 1.1px solid white;
  padding: 5px;

  border-radius: 50%;

}
.socials a i{
  font-size: 1.1rem;
  width: 20px;


  transition: color .4s ease;

}
.socials a:hover i{
  color: aqua;
}

.footer-bottom{
  background: #1269D8;
  width: 100vw;
  padding: 0rem 10px 10px 1rem;
  text-align: center;
  padding-bottom: 0.5rem;
}
.footer-bottom p{
  font-size: 0.5rem;
  word-spacing: 2px;
  text-transform: capitalize;
  margin-bottom:0.5rem;
}
.footer-bottom p a{
color:#000000;
font-size: 0.5rem;
text-decoration: none;
}
  </style>
</head>

<body class="text-center">
  <div class="container custom-container">
    <header class="masthead mb-auto">
      <div class="inner">
        <h3 class="masthead-brand">당신의 면접에 행운이</h3>
        <span style="
    font-size: 1rem;
    font-family: sans-serif;
">
AI기반 면접 질문 생성 서비스
</span>
        <nav class="nav nav-masthead justify-content-center">
          <a class="nav-link active" href="#">Home</a>
          <a class="nav-link" href="#">Features</a>
          <a class="nav-link" href="#">Contact</a>
        </nav>
      </div>
    </header>
    <div class="row" style="background: #f5f5f5; margin-right:0; margin-left:0;">
      <!-- col-* 클래스를 사용하여 화면의 크기에 따라 너비를 조절 -->
      <div class="col-12 col-md-10 col-lg-8 mx-auto">

        <div class="cover-container d-flex h-100 p-3 mx-auto flex-column">


          <main role="main" class="inner cover shadow p-3 mb-4 bg-white rounded">


            <form id="personal-statement-form">
              <div class="custom-form-group" style="margin-top: 0; margin-bottom:0;">
                <label for="job_position" class="custom-label">지원하시려는 직무를 입력해주세요.</label>
                <input type="text" id="job_position" class="form-control custom-form-control"
                  placeholder="예: 소프트웨어 엔지니어, 마케팅 전문가...">
              </div>
              <div class="custom-form-group custom-form-control" style="margin-top:0;">
                <label for="type-select" class="custom-label">유형 선택</label>
                <select id="type-select" class="form-select" style="font-size: small;">
                  <option value="personal_statement_form" selected>자기소개서</option>
                  <option value="project">프로젝트</option>
                </select>
              </div>
              <div id="personal-statement-section">
                <div class="custom-form-group" style="margin-top: 0;">
                  <label for="introduction-article" class="custom-label">자기소개서 항목을 입력해주세요.</label>
                  <input type="text" id="introduction-article" class="form-control custom-form-control"
                    placeholder="예: 본 직군으로 지원을 결정하시게 된 계기를 작성해 주세요.">
                </div>
                <div class="custom-form-group">
                  <label for="personal_statement" class="custom-label">자기소개서를 입력해주세요.</label><span
                    class="custom-label custom-span">(최대 2,000자)</span>
                    <textarea id="personal_statement" class="form-control custom-form-control" rows="12" style="font-size: 0.7rem;" oninput="updateCounter(this, 2000, 'personal_counter')"></textarea>
                    <div id="personal_counter" style="text-align: right; font-size:0.7rem;"></div>
                </div>

              </div>
              <div id="project-section">
                <div class="custom-form-group">
                  <label for="project_title" class="custom-label">프로젝트 제목을 입력해주세요.</label>
                  <input type="text" id="project_title" class="form-control custom-form-control"
                    placeholder="프로젝트 제목을 입력해주세요.">
                </div>
                <div class="custom-form-group">
                  <label for="project_description" class="custom-label">프로젝트 설명을 입력해주세요.</label><span
                  class="custom-label custom-span">(최대 2,000자)</span>
                  <textarea id="project_description" class="form-control custom-form-control" rows="12" placeholder="프로젝트에 대한 설명을 입력해주세요." oninput="updateCounter(this, 2000, 'description_counter')"></textarea>
                  <div id="description_counter" style="text-align: right;"></div>
                </div>
              </div>
            
            <button type="submit" class="btn btn-primary">질문 생성</button>
          </form>
          <div id="questions" class="mt-4 accordion"></div>
          </main>

          
        </div>
      </div>
    </div>
    <footer>
      <div class="footer-content">
          <h3>Developed by Lee Junhyung</h3>
          <p>합격을 응원합니다.</p>
      </div>
      <div class="footer-bottom">
          <p style="margin:0;">copyright &copy; <a href="https://github.com/with-developer/Interview-Question-Generator/blob/main/LICENSE">이준형 (MIT License)</a>  </p>
      </div>
  
  </footer>
  </div>

  





<script>
  function updateCounter(element, limit, counterId) {
    const counter = document.getElementById(counterId);
    const currentLength = element.value.length;

    if (currentLength > limit) {
      element.value = element.value.substring(0, limit);
    }

    counter.textContent = `${element.value.length} / ${limit}`;
  }
  $('#personal-statement-form').submit(function (e) {
    e.preventDefault();
  
    // 공통으로 사용되는 job_position 값
    let job_position = $('#job_position').val();
  
    // 현재 선택된 select option
    let selectedValue = $("#type-select").val();
  
    // 데이터 초기화
    let dataToSend = {
      job_position: job_position,
      type: selectedValue
    };
  
    // 자기소개서가 선택되어 있는 경우
    if (selectedValue === "personal_statement_form") {
      dataToSend.introduction_article = $('#introduction-article').val();
      dataToSend.personal_statement = $('#personal_statement').val();
    } 
    // 프로젝트가 선택되어 있는 경우
    else if (selectedValue === "project") {
      dataToSend.project_title = $('#project_title').val();
      dataToSend.project_description = $('#project_description').val();
    }
  
    // 백엔드로 데이터 전송
    $.post('/generate_questions', dataToSend, function (data) {
      // "생성된 질문" 제목 추가
      let questionsHtml = '<h3>생성된 질문</h3>';
    
    data.questions.forEach(function(q, index) {
      questionsHtml += `
        <div class="accordion-item">
          <h2 class="accordion-header" id="heading${index}">
            <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse" data-bs-target="#collapse${index}">
              ${index + 1}. ${q.question}
            </button>
          </h2>
          <div id="collapse${index}" class="accordion-collapse collapse"> <!-- data-bs-parent 속성 제거 -->
            <div class="card-body" style="text-align: initial;">
              <p>${q.tip}</p>
            </div>
          </div>
        </div>
      `;
    });
    $('#questions').html(questionsHtml);
  });
});

  $(document).ready(function () {
    // 초기 상태 설정 (자기소개서 입력칸이 기본으로 보이도록)
    $("#project-section").hide();

    // select 태그의 변경을 감지
    $("#type-select").change(function () {
      var selectedValue = $(this).val();
      if (selectedValue === "personal_statement_form") {
        $("#personal-statement-section").show();
        $("#project-section").hide();
      } else if (selectedValue === "project") {
        $("#personal-statement-section").hide();
        $("#project-section").show();
      }
    });
  });
</script>



</body>

</html>